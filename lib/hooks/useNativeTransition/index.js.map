{"version":3,"sources":["../../../src/hooks/useNativeTransition/index.js"],"names":["useNativeTransition","cssProperties","duration","defaultDuration","ref","onComplete","initialProperties","node","setNode","callbackRef","hasOwnProperty","current","Object","keys","forEach","key","value","style","transition","map","property","durationOverride","easingName","easing","startAt","endAt","delay","bezierCurveEasings","expo","originalDuration","join","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\nimport transfromAnimatedProperties from \"./transformAnimatedProperties\";\nimport { bezierCurveEasings } from \"../useTransition/easeOut\";\n\nconst useNativeTransition = (\n  cssProperties,\n  { duration: defaultDuration = 0, ref, onComplete, initialProperties = null }\n) => {\n  const [node, setNode] = useState(null);\n\n  const callbackRef = useCallback(\n    node => {\n      if (node != null) {\n        if (typeof ref === \"function\") {\n          ref(node);\n        } else if (\n          typeof ref === \"object\" &&\n          ref != null &&\n          ref.hasOwnProperty(\"current\")\n        ) {\n          ref.current = node;\n        }\n\n        if (initialProperties != null) {\n          transfromAnimatedProperties(initialProperties);\n\n          Object.keys(initialProperties).forEach(key => {\n            const { value } = initialProperties[key];\n            node.style[key] = value;\n          });\n        } else {\n          transfromAnimatedProperties(cssProperties);\n\n          Object.keys(cssProperties).forEach(key => {\n            const { value } = cssProperties[key];\n            node.style[key] = value;\n          });\n        }\n\n        setNode(node);\n      }\n    },\n    [ref, initialProperties, cssProperties]\n  );\n\n  useEffect(() => {\n    if (cssProperties != null && node != null) {\n      transfromAnimatedProperties(cssProperties);\n\n      const transition = Object.keys(cssProperties)\n        .map(property => {\n          let {\n            duration: durationOverride,\n            easing: easingName,\n            startAt = 0,\n            endAt = 1\n          } = cssProperties[property];\n\n          let delay;\n          let easing =\n            bezierCurveEasings[easingName] != null\n              ? bezierCurveEasings[easingName]\n              : bezierCurveEasings.expo;\n          let duration =\n            typeof durationOverride === \"number\"\n              ? durationOverride\n              : defaultDuration;\n\n          startAt = typeof startAt === \"number\" ? startAt : 0;\n          endAt = typeof endAt === \"number\" ? endAt : 0;\n\n          const originalDuration = duration;\n          duration = (endAt - startAt) * originalDuration;\n          delay = `${startAt * originalDuration}`;\n\n          return `${property} ${duration}ms ${easing} ${delay}ms`;\n        })\n        .join(\", \");\n\n      node.style.transition = transition;\n\n      Object.keys(cssProperties).forEach(key => {\n        const { value } = cssProperties[key];\n        node.style[key] = value;\n      });\n    }\n  }, [initialProperties, cssProperties, defaultDuration, node]);\n\n  useEffect(() => {\n    if (node != null) {\n      if (typeof onComplete === \"function\") {\n        node.addEventListener(\"transitionend\", onComplete);\n      }\n      return () => {\n        node.removeEventListener(\"transitionend\", onComplete);\n      };\n    }\n  }, [node, onComplete]);\n\n  return callbackRef;\n};\n\nexport default useNativeTransition;\n"],"file":"index.js"}